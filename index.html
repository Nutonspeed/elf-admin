
<!DOCTYPE html>
<html>
<head>
  <title>ELF ‡πÄ‡∏õ‡∏¥‡∏î‡∏ö‡∏¥‡∏•</title>
  <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
</head>
<body>
  <h1>‡πÄ‡∏õ‡∏¥‡∏î‡∏ö‡∏¥‡∏•‡πÉ‡∏´‡∏°‡πà</h1>
  <form id="billForm">
    <input type="text" id="customer_name" placeholder="‡∏ä‡∏∑‡πà‡∏≠‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤" required><br>
    <input type="text" id="phone" placeholder="‡πÄ‡∏ö‡∏≠‡∏£‡πå‡πÇ‡∏ó‡∏£" required><br>
    <input type="text" id="address" placeholder="‡∏ó‡∏µ‡πà‡∏≠‡∏¢‡∏π‡πà"><br>
    <input type="text" id="fabric" placeholder="‡∏•‡∏≤‡∏¢‡∏ú‡πâ‡∏≤" required><br>
    <input type="number" id="total_price" placeholder="‡∏¢‡∏≠‡∏î‡πÄ‡∏ï‡πá‡∏°" required><br>
    <input type="number" id="deposit" placeholder="‡∏°‡∏±‡∏î‡∏à‡∏≥"><br>
    <input type="date" id="delivery_date" placeholder="‡∏ß‡∏±‡∏ô‡∏ô‡∏±‡∏î‡∏™‡πà‡∏á"><br>
    <button type="submit">üíæ ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏ö‡∏¥‡∏•</button>
  </form>

  <script>
    const supabase = window.supabase.createClient(
      'https://zhiflvlhamuijgxgtdlf.supabase.co',
      'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InpoaWZ2bGhtYXVpamd4Z3RkbGYiLCJyb2xlIjoiYW5vbiIsImlhdCI6MTcxNDYxNjUwMiwiZXhwIjoyMDY5OTkyNTAyfQ.nWwaEyhVGkczv2W77cMIXW90NGuXCIKHX90_X3nfhPw'
    );

    document.getElementById("billForm").addEventListener("submit", async function(e) {
      e.preventDefault();

      const customer_name = document.getElementById("customer_name").value;
      const phone = document.getElementById("phone").value;
      const address = document.getElementById("address").value;
      const fabric = document.getElementById("fabric").value;
      const total_price = parseFloat(document.getElementById("total_price").value);
      const deposit = parseFloat(document.getElementById("deposit").value || 0);
      const delivery_date = document.getElementById("delivery_date").value;

      const result = await supabase.from("orders").insert([{
        customer_name,
        phone,
        address,
        fabric,
        total_price,
        deposit,
        delivery_date,
        status: "‡∏°‡∏±‡∏î‡∏à‡∏≥‡πÅ‡∏•‡πâ‡∏ß",
        created_at: new Date().toISOString()
      }]);

      if (result.error) {
        alert("‚ùå ‡πÄ‡∏Å‡∏¥‡∏î‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î: " + result.error.message);
      } else {
        alert("‚úÖ ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏ö‡∏¥‡∏•‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à!");
        document.getElementById("billForm").reset();
      }
    });
  </script>
</body>
</html>
